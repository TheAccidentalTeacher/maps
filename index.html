<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geographic Detective Academy</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
        crossorigin=""/>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #fff;
            overflow: hidden;
        }
        
        #header {
            background: rgba(0, 0, 20, 0.8);
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #ffd700;
        }
        
        #header h1 {
            font-size: 24px;
            color: #ffd700;
        }
        
        #xp-display {
            background: rgba(255, 215, 0, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            border: 2px solid #ffd700;
            font-weight: bold;
            font-size: 18px;
        }
        
        #main-container {
            display: flex;
            height: calc(100vh - 70px);
        }
        
        #map-container {
            flex: 1;
            position: relative;
        }
        
        #map {
            width: 100%;
            height: 100%;
        }
        
        #sidebar {
            width: 350px;
            background: rgba(0, 0, 20, 0.9);
            padding: 20px;
            overflow-y: auto;
            border-left: 2px solid #667eea;
        }
        
        .mode-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .mode-btn {
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 2px solid #ffd700;
            border-radius: 8px;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .mode-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }
        
        .mode-btn.active {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #000;
        }
        
        .panel {
            display: none;
            animation: fadeIn 0.3s;
        }
        
        .panel.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .info-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 4px solid #ffd700;
        }
        
        .info-box h3 {
            color: #ffd700;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .coord-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }
        
        .coord-item {
            background: rgba(0, 0, 0, 0.3);
            padding: 8px;
            border-radius: 4px;
            text-align: center;
        }
        
        .coord-label {
            font-size: 11px;
            color: #aaa;
            margin-bottom: 4px;
        }
        
        .coord-value {
            font-size: 16px;
            font-weight: bold;
            color: #ffd700;
        }
        
        .btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 2px solid #ffd700;
            border-radius: 8px;
            color: #fff;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.4);
        }
        
        .notification {
            position: fixed;
            top: 80px;
            right: 20px;
            background: rgba(0, 200, 0, 0.9);
            color: #fff;
            padding: 15px 25px;
            border-radius: 8px;
            font-weight: bold;
            opacity: 0;
            transform: translateX(400px);
            transition: all 0.3s;
            z-index: 10000;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .notification.error {
            background: rgba(200, 0, 0, 0.9);
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>üïµÔ∏è GEOGRAPHIC DETECTIVE ACADEMY</h1>
        <div id="xp-display">‚≠ê <span id="xp-value">0</span> XP</div>
    </div>
    
    <div id="main-container">
        <div id="map-container">
            <div id="map"></div>
        </div>
        
        <div id="sidebar">
            <div class="mode-buttons">
                <button class="mode-btn active" onclick="switchMode('explore')">üó∫Ô∏è EXPLORE</button>
                <button class="mode-btn" onclick="switchMode('mystery')">üéØ MYSTERY</button>
                <button class="mode-btn" onclick="switchMode('scavenger')">üåç SCAVENGER</button>
                <button class="mode-btn" onclick="switchMode('guess')">üì∏ GUESS</button>
                <button class="mode-btn" onclick="switchMode('missions')">üèÜ MISSIONS</button>
                <button class="mode-btn" onclick="switchMode('alaska')">üèîÔ∏è ALASKA</button>
            </div>
            
            <!-- EXPLORE PANEL -->
            <div id="explore-panel" class="panel active">
                <div class="info-box">
                    <h3>üñ±Ô∏è Live Coordinates</h3>
                    <div class="coord-display">
                        <div class="coord-item">
                            <div class="coord-label">LATITUDE</div>
                            <div class="coord-value" id="hover-lat">--</div>
                        </div>
                        <div class="coord-item">
                            <div class="coord-label">LONGITUDE</div>
                            <div class="coord-value" id="hover-lng">--</div>
                        </div>
                    </div>
                    <p style="margin-top: 10px; font-size: 12px; color: #aaa;">Move your mouse over the map to see live coordinates</p>
                </div>
                
                <div class="info-box">
                    <h3>üìç Clicked Location</h3>
                    <div id="location-info">Click on the map to investigate a location</div>
                </div>
            </div>
            
            <!-- MYSTERY PANEL -->
            <div id="mystery-panel" class="panel">
                <div class="info-box">
                    <h3>üéØ Mystery Location Challenge</h3>
                    <p>Find the mystery location from coordinates! You have 60 seconds.</p>
                    <button class="btn" onclick="startMystery()">START CHALLENGE</button>
                    <div id="mystery-info" style="margin-top: 15px;"></div>
                </div>
            </div>
            
            <!-- ALASKA PANEL -->
            <div id="alaska-panel" class="panel">
                <div class="info-box">
                    <h3>üèîÔ∏è Alaska Adventure</h3>
                    <p>Find 10 famous Alaska locations starting from your hometown!</p>
                    <button class="btn" onclick="startAlaska()">START ALASKA ADVENTURE</button>
                    <div id="alaska-info" style="margin-top: 15px;"></div>
                </div>
            </div>
            
            <!-- Other panels placeholder -->
            <div id="scavenger-panel" class="panel">
                <div class="info-box">
                    <h3>üåç Scavenger Hunt</h3>
                    <p>Coming soon!</p>
                </div>
            </div>
            
            <div id="guess-panel" class="panel">
                <div class="info-box">
                    <h3>üì∏ Guess the Location</h3>
                    <p>Coming soon!</p>
                </div>
            </div>
            
            <div id="missions-panel" class="panel">
                <div class="info-box">
                    <h3>üèÜ Detective Missions</h3>
                    <p>Coming soon!</p>
                </div>
            </div>
        </div>
    </div>
    
    <div id="notification" class="notification"></div>
    
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>
    
    <script>
        // Global variables
        let leafletMap;
        let gameState = {
            xp: 0,
            currentMode: 'explore'
        };
        
        // Initialize map when page loads
        window.addEventListener('load', function() {
            console.log('Initializing map...');
            
            // Create map
            leafletMap = L.map('map').setView([62.1, -145.5], 4); // Centered on Alaska
            
            // Add base tile layer
            L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                maxZoom: 19,
                attribution: '&copy; OpenStreetMap &copy; CARTO',
                subdomains: 'abcd'
            }).addTo(leafletMap);
            
            // Add layer control
            const baseMaps = {
                "Street (English)": L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
                    maxZoom: 19,
                    attribution: '&copy; OpenStreetMap &copy; CARTO',
                    subdomains: 'abcd'
                }),
                "Satellite": L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
                    maxZoom: 19,
                    attribution: 'Tiles &copy; Esri'
                }),
                "Topographic": L.tileLayer('https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png', {
                    maxZoom: 17,
                    attribution: '&copy; OpenStreetMap, SRTM'
                }),
                "Terrain": L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}', {
                    maxZoom: 13,
                    attribution: 'Tiles &copy; Esri'
                })
            };
            
            L.control.layers(baseMaps).addTo(leafletMap);
            
            // Mouse move event for live coordinates
            leafletMap.on('mousemove', function(e) {
                document.getElementById('hover-lat').textContent = e.latlng.lat.toFixed(6) + '¬∞ N';
                document.getElementById('hover-lng').textContent = e.latlng.lng.toFixed(6) + '¬∞ E';
            });
            
            // Click event
            leafletMap.on('click', function(e) {
                const lat = e.latlng.lat.toFixed(6);
                const lng = e.latlng.lng.toFixed(6);
                
                document.getElementById('location-info').innerHTML = `
                    <div class="coord-display">
                        <div class="coord-item">
                            <div class="coord-label">LATITUDE</div>
                            <div class="coord-value">${lat}¬∞</div>
                        </div>
                        <div class="coord-item">
                            <div class="coord-label">LONGITUDE</div>
                            <div class="coord-value">${lng}¬∞</div>
                        </div>
                    </div>
                    <p style="margin-top: 10px; font-size: 12px;">Fetching location details...</p>
                `;
                
                // Fetch location name
                fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lng}`)
                    .then(response => response.json())
                    .then(data => {
                        const address = data.address || {};
                        const locationName = address.city || address.town || address.village || address.county || address.state || 'Unknown location';
                        const country = address.country || '';
                        
                        document.getElementById('location-info').innerHTML = `
                            <div class="coord-display">
                                <div class="coord-item">
                                    <div class="coord-label">LATITUDE</div>
                                    <div class="coord-value">${lat}¬∞</div>
                                </div>
                                <div class="coord-item">
                                    <div class="coord-label">LONGITUDE</div>
                                    <div class="coord-value">${lng}¬∞</div>
                                </div>
                            </div>
                            <p style="margin-top: 10px;"><strong>üìç ${locationName}</strong></p>
                            <p style="font-size: 12px; color: #aaa;">${country}</p>
                        `;
                    })
                    .catch(error => {
                        console.error('Error fetching location:', error);
                    });
            });
            
            console.log('Map initialized successfully!');
        });
        
        // Switch between modes
        function switchMode(mode) {
            // Update buttons
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Update panels
            document.querySelectorAll('.panel').forEach(panel => panel.classList.remove('active'));
            document.getElementById(mode + '-panel').classList.add('active');
            
            gameState.currentMode = mode;
        }
        
        // Show notification
        function showNotification(message, isError = false) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.toggle('error', isError);
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }
        
        // Add XP
        function addXP(amount) {
            gameState.xp += amount;
            document.getElementById('xp-value').textContent = gameState.xp;
            showNotification(`+${amount} XP!`);
        }
        
        // Mystery Challenge
        function startMystery() {
            showNotification('Mystery Challenge starting soon!');
        }
        
        // Alaska Adventure
        function startAlaska() {
            leafletMap.setView([62.1, -145.5], 6);
            showNotification('Alaska Adventure starting! Find Glennallen first!');
        }
    </script>
</body>
</html>

